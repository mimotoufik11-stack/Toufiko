---
import SearchBar from './SearchBar.astro';
import ThemeToggle from './ThemeToggle.astro';

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/lessons', label: 'Lessons' },
  { href: '/audio', label: 'Audio' },
  { href: '/books', label: 'Books' },
  { href: '/articles', label: 'Articles' },
  { href: '/fatwas', label: 'Fatwas' },
  { href: '/scholars', label: 'Scholars' },
  { href: '/about', label: 'About' },
  { href: '/contact', label: 'Contact' }
];

const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';
---
<header class="sticky top-0 z-50 border-b border-primary/10 bg-[var(--color-surface)]/90 backdrop-blur">
  <div class="mx-auto flex w-full max-w-6xl flex-col gap-4 px-4 py-4 sm:px-6">
    <div class="flex items-center justify-between gap-3">
      <a href="/" class="flex items-center gap-3 text-base font-semibold tracking-tight md:text-lg">
        <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/15 text-sm font-bold uppercase text-primary">SSN</span>
        <span class="text-[var(--color-text)]">Salafi Science Network</span>
      </a>
      <div class="hidden items-center gap-2 md:flex">
        <nav class="flex items-center gap-5 text-sm font-medium">
          {navLinks.map((link) => {
            const normalized = link.href.replace(/\/$/, '') || '/';
            const isActive = currentPath === normalized;
            return (
              <a
                href={link.href}
                class={['transition-colors', isActive ? 'text-primary' : 'text-[var(--color-text)]/80 hover:text-primary'].join(' ')}
                aria-current={isActive ? 'page' : undefined}
              >
                {link.label}
              </a>
            );
          })}
        </nav>
        <ThemeToggle />
      </div>
      <div class="md:hidden">
        <ThemeToggle />
      </div>
    </div>
    <div class="flex flex-col gap-3 md:hidden">
      <nav class="flex flex-wrap items-center gap-3 text-sm font-medium">
        {navLinks.map((link) => (
          <a
            href={link.href}
            class="rounded-full bg-[var(--color-muted)] px-3 py-1 text-[var(--color-text)]/80 transition hover:bg-primary/10 hover:text-primary"
          >
            {link.label}
          </a>
        ))}
      </nav>
    </div>
    <SearchBar placeholder="Search the knowledge base..." />
  </div>
</header>
